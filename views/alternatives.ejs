<%- include('./partials/header') %>
<form id="search-swaps" method="get" action="/alternatives">
  <div class="input-item">
    <input name="q" type="text" placeholder="Search for eco-friendly alternatives" autocomplete="off" />
    <!-- Placeholder=What you see in the input box before you enter anything -->
    <div class="search-button">
      <button type="submit" id="searchBtn" class="btn white-text">Search</button>
      <!-- type="submit" allows you to search by pressing enter or clicking search button ---- type="button" works only when search button is pressed -->
    </div>
  </div>
</form>

<% if (didSearch) { %>
<!-- start searched item -->
<% if (item) { %>
<h3>Item: <%= item.houseItem %></h3>

<section id="alternatives-list">
  <% item.alternatives.forEach(a => { %>
  <div class="product-details">
    <div class="searched-swap">
      <h4><%= a.swap %>:</h4>
      <% if (user) { %>
      <form method="POST" action="/swaps">
        <input type="hidden" name="alternative" value="<%= a._id %>" />
        <input type="hidden" name="item" value="<%= item._id %>" />
        <button type="submit" class="btn white-text">Add Swap</button>
      </form>
      <% } %>
    </div>
    <div class="swap-description">
      <h5><%= a.description %></h5>
    </div>
  </div>

  <!-- This form encompasses the 'Add to list' button-->
  <!-- <% if (user) { %>
  <form method="POST" action="/swaps">
    <input type="hidden" name="alternative" value="<%= a._id %>" />
    <input type="hidden" name="item" value="<%= item._id %>" />
    <button type="submit" class="btn white-text">Add Swap</button>
  </form>
  <% } %> -->
  <!-- A hidden field includes data that cannot be seen or modified by users when a form is submitted --- stores what database record that needs to be updated when the form is submitted-->

  <% }) %>
</section>

<% } else { %>
<h3>No Item Found</h3>
<% } %>
<!-- end searched item-->
<% } else {%>
<!-- start did not search -->
<h3>Search for Item</h3>
<!-- end did not search -->
<% } %>

<%- include('./partials/footer') %>
<!-- one dot: same file VS 2 dots: goes up a level in directory-->